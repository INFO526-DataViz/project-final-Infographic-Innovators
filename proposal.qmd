---
title: "Comprehensive analysis of air crash data"
subtitle: "Proposal"
author: 
  - name: " Inforgraphic Innovators - Eshaan, Bharath, Thanoosha, Antonio"
    affiliations:
      - name: "School of Information, University of Arizona"
description: "A shiny app integration with air crash analysis"
format:
  html:
    code-tools: true
    code-overflow: wrap
    code-line-numbers: true
    embed-resources: true
editor: visual
code-annotations: hover
categories: 
  - Data visualization
execute:
  warning: false
---

```{r load_pkgs, message=FALSE, output=FALSE}
#| code-fold: true
#| code-summary: "Installed Packages"

# GETTING THE LIBRARIES
if (!require(pacman))
  install.packages(pacman)

pacman::p_load(tidyverse,
               formattable,
               tidytuesdayR,
               janitor,
               dlookr,
               here)
```

## High Level Goal

Build a Shiny app where users can look at different plots to visualize the flight crashes occurred in the United States form 1980 to 2022 and interpret.

## Dataset

```{r load_dataset, message=FALSE, output=FALSE}
# Reading the data using read_csv
flights_ntsb <- read_csv(here("data", "flight_crash_data_NTSB.csv"))

flights_ntsb <- flights_ntsb |>
  clean_names()
```

In preparation for our analysis, we loaded the data and preliminary reviewed its structure and contents. For example, using inline code such as clean_names, diagnose, describe, and formattable. We obtained an overview of the dataset's variables and initial statistics. This preliminary step confirmed the dataset's suitability for answering our research questions, which revolve around identifying temporal patterns, assessing regional safety performance, and evaluating the effectiveness of safety regulations over the past four decades.

## Background

The dataset central to our investigation was procured through a formal request to the National Transportation Safety Board ([NSTB](https://www.ntsb.gov/Pages/AviationQueryV2.aspx)). It encompasses detailed records of aircraft crashes in the U.S. from January 1, 1980, to December 31, 2022. The dataset is structured as a tibble with 89,134 rows and 38 columns, amounting to 3,387,093 individual data points. This rich dataset is ideal for our purposes because it enables both time-series and geo-spatial analyses---methods we believe are critical for understanding the dynamics and geo-spatial distribution of aircraft accidents over time.

```{r diagnose_flights, message=FALSE}
#| code-fold: true
#| code-summary: "Flights Report Data Diagnosis Code"

# Getting basic information about the dataset

flights_ntsb |>
  diagnose() |>
  formattable()
```

```{r describe_flights, message=FALSE}
#| code-fold: true
#| code-summary: "Flights Report Data Describe Code"

# Getting basic statistical information about the dataset

flights_ntsb |>
  describe() |>
  formattable()
```

## Value

Our project's primary goal is to conduct an in-depth analysis of aircraft crash incidents within the United States to uncover temporal trends and geographical patterns. This objective is fueled by our diverse personal experiences with air travel, which range from enthusiasm to apprehension. This stems from talking about places we've traveled to, we chose the data as some of us are more comfortable with flying than others. We decided by looking at aircraft crash data that it could be a chance to get more informed about aircraft crashes within the United States. By examining the data, we hope to gain a clearer understanding of the factors contributing to these incidents and alleviate some of the concerns regarding aviation safety. We wanted do time series analysis as well as geo-spatial analysis and this data presented itself as a great opportunity to do both. We intend to design a shiny app so that we can display the a time series change of crashes throughout the years.

## Questions

The two questions to be answered are:

### Question 1

What is the historical trend in aircraft crashes and injuries, including the distribution of injury severity (fatal, serious, minor)?

### Question 2

Where are the most common locations for aircraft crashes, and are there any specific connections like months, weather conditions associated with crash frequencies?

## Analysis plan

### Approach for question 1

In this Question, we visualize the trend in aircraft crashes historically. We are going to plot this trend based on different aspects like Severity of Injury which is represented using column `highest_injury_level`. Here they classify a particular injury as a `minor`, `serious` and `fatal` injury based on the level of casualties that occurred in the crash. We are visualizing this trend using `Time-Series Analysis` where we can compare the different crashes that occur over time and further classify the type of crash and number of injuries that took place. This can help us not only show the number of crashes happening per year but also have them sorted based on their fatality type. We also would like to highlight few notable airplane crashes in the history in our time-series analysis.

Further, we also would like to show when and where these crashes occurred by employing geo-spatial analysis plotting a `scatter plot on a map`, if there are places where most crashes occur we will extend this approach to plot a bubble plot on a map as well. We also would like to display the distrubution crashes across different months using a `radar plot`. Additionally, we want to sort different types of crashes based on different event types which is represented using the column `event_type`. Here, we will visualize plane crashes based on the different types of occurrences or events and its effect on the different severity of injuries and total injuries employing a `Sankey plot`. All of these plots will be integrated into our final shiny app.

### Approach for question 2

Geographical Analysis-Visualization: A geographical heatmap or scatter plot using latitude and longitude to pinpoint crash locations. Areas with a high concentration of crashes will be highlighted.

### Variables of focus for both questions

| Variable             | Description                                                                                |
|------------------------|-----------------------------------------------|
| event_type           | Type of event - accident, incident or occurrence                                           |
| event_date           | Date time of when the event has occurred                                                   |
| city                 | The city or place location closest to the site of the event                                |
| state                | The state in which the site of the event is present                                        |
| highest_injury_level | Indicate the highest level of injury among all injuries sustained as a result of the event |
| fatal_injury_count   | The total number of fatal injuries from an event                                           |
| serious_injury_count | The total number of serious injuries from an event                                         |
| minor_injury_count   | The total number of minor injuries from an event                                           |
| probable_cause       | The probable cause for the aircraft crash as per the NTSB report                           |
| has_safety_rec       | If the aircraft has a saftey record previously                                             |
| latitude             | Latitude for the event site in degrees and decimal degrees.                                |
| longitude            | Longitude for the event site in degrees and decimal degrees.                               |
| weather_condition    | The basic weather conditions at the time of the event                                      |
| air_craft_damage     | Indicate the severity of damage to the accident aircraft                                   |
| operator             | The full name of the operator of the accident aircraft                                     |

: {.hover}

## Implementation

### Plan of Attack

|               Week                | Weekly Tasks                                                                          | Persons in Charge |  Backup  |
|:----------------:|-------------------|:----------------:|:----------------:|
|       until November 8^th^        | Explore and finalize the dataset and the problem statements                           |     Everyone      | Everyone |
|                \-                 | Complete the proposal and assign some high-level tasks                                |     Everyone      | Everyone |
|     November 9^th^ to 15^th^      | Getting to know about Shiny application                                               |        TBD        |   TBD    |
|                \-                 | Data cleaning and Data pre-processing                                                 |        TBD        |   TBD    |
|                \-                 | Question specific exploration and data categorization \<change to question specific\> |        TBD        |   TBD    |
|     November 16^th^ to 22^nd^     | Generating plots for Q1                                                               |        TBD        |   TBD    |
|                \-                 | Generating plots for Q2                                                               |        TBD        |   TBD    |
|                \-                 | Exploring on how to integrate our specific visualizations and shiny                   |        TBD        |   TBD    |
|     November 23^rd^ to 29^th^     | Generating remaining parts of the plots for Q1 and Q2                                 |        TBD        |   TBD    |
|                \-                 | Improving the generated plots                                                         |        TBD        |   TBD    |
|                \-                 | Start integrating shiny and our visualizations                                        |        TBD        |   TBD    |
| November 30^th^ to December 6^th^ | Refining the code for code review with comments                                       |        TBD        |   TBD    |
|                \-                 | Having some base functions to use themes interchangably                               |        TBD        |   TBD    |
|                \-                 | Continue with the integration of shiny and our plots                                  |        TBD        |   TBD    |
|     December 7^th^ to 13^th^      | Complete the shiny application with multiple user functionality                       |        TBD        |   TBD    |
|                \-                 | Review the generated plots and shiny integration                                      |        TBD        |   TBD    |
|                \-                 | Write-up and presentation for the project                                             |     Everyone      | Everyone |

: {.hover}

### Repo Organization

The following are the folders involved in the Project repository.

-   **'data/':** Used for storing any necessary data files for the project, such as input files.

-   **'images/':** Used for storing image files used in the project.

-   **'presentation_files/':** Folder for having presentation related files.

-   **'\_extra/':** Used to brainstorm our analysis which won't impact our project workflow.

-   **'\_freeze/':** This folder is used to store the generated files during the build process. These files represent the frozen state of the website at a specific point in time.

-   **'\_site/':** Folder used to store the generated static website files after the site generator processes the quarto document.

-   **'.github/':** Folder for storing github templates and workflow.

We will be creating few folders inside `images/` folder for storing question specific images and presentation related images which are generated through out the plot.

::: callout-note
## Note:

These are the planned approaches, and we intend to explore and solve the problem statement which we came up with. Parts of our approach might change in the final implementation.
:::
